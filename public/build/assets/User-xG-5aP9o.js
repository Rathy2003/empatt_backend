import{M as x}from"./MainLayout-vZCMMv3O.js";import{r as E,i as U,o as l,f as L,b as s,c as r,e as u,t as n,w as m,n as c,v as f,F as h,j as v,m as p,u as B,d as V,W as g,x as w}from"./app-D2HYKBzG.js";import{_ as k}from"./No-Image-Placeholder.svg-BHQ-ZzRC.js";import{_ as S}from"./no-image-CSNqFI6u.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={components:{MainLayout:x},props:{users:Array,companies:Array,filters:Object},mounted(){let o=this;$("#staticBackdrop").on("hide.bs.modal",function(){o.clearForms(),o.clearErrors(),document.getElementById("logo-preview").src=k,document.querySelector("input[type=file]").value=""}),$("#deleteModal").on("hide.bs.modal",function(){o.form_data.id=null})},data(){return{success:{show:!1,message:""},form_data:w({readonly:!1,id:null,firstname:"",lastname:"",email:"",phone_number:"",gender:"",company_id:"",role:"",photo:null,status:"active",old_photo:null,password:"",confirm_password:""}),errors:{firstname:"",lastname:"",email:"",phone_number:"",gender:"",company_id:"",role:"",status:"",password:"",confirm_password:""},search:this.filters.search||"",debounceTimer:null}},methods:{searchItems(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{g.get(route("user"),{search:this.search},{preserveState:!0,replace:!0})},300)},save(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"});let o=this;this.clearErrors(),this.form_data.post(route("createUser"),{onSuccess:function(e){$("#staticBackdrop").modal("hide"),o.clearForms(),o.success.show=!0,o.success.message="User created successfully",setTimeout(()=>{o.success.show=!1,o.success.message=""},3e3)},onError:e=>{Object.keys(e).forEach(_=>{this.errors[_]=e[_]}),console.log(this.errors)}}),$.LoadingOverlay("hide")},saveEdit(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"});let o=this;this.clearErrors(),this.form_data.post(route("saveUser"),{onSuccess:function(e){$("#staticBackdrop").modal("hide"),o.clearForms(),o.success.show=!0,o.success.message="User updated successfully",setTimeout(()=>{o.success.show=!1,o.success.message=""},3e3)},onError:e=>{Object.keys(e).forEach(_=>{this.errors[_]=e[_]}),console.log(this.errors)}}),$.LoadingOverlay("hide")},onView(o){this.form_data.readonly=!0,this.form_data.id=o.id,this.form_data.firstname=o.firstname,this.form_data.lastname=o.lastname,this.form_data.email=o.email,this.form_data.phone_number=o.phone_number,this.form_data.gender=o.gender,this.form_data.role=o.roles[0].name,this.form_data.company_id=o.company_id,this.form_data.old_photo=o.photo,this.form_data.status=o.status,$("#staticBackdrop").modal("show")},onEdit(o){this.form_data.id=o.id,this.form_data.firstname=o.firstname,this.form_data.lastname=o.lastname,this.form_data.email=o.email,this.form_data.phone_number=o.phone_number,this.form_data.gender=o.gender,this.form_data.role=o.roles[0].name,this.form_data.company_id=o.company_id,this.form_data.old_photo=o.photo,this.form_data.status=o.status,$("#staticBackdrop").modal("show")},onDelete(o){this.form_data.id=o.id,console.log(this.form_data.id),$("#deleteModal").modal("show")},onCfDelete(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"});let o=this;w({id:this.form_data.id}).post(route("deleteUser"),{onSuccess:()=>{$("#deleteModal").modal("hide"),o.success.show=!0,o.success.message="User deleted successfully",setTimeout(()=>{o.success.show=!1,o.success.message=""},3e3)},onError:i=>{console.log(i)}}),$.LoadingOverlay("hide")},onChangeFile(o){let e=o.target.files[0];e&&(this.form_data.photo=e)},clearErrors(){this.errors.firstname="",this.errors.lastname="",this.errors.email="",this.errors.phone_number="",this.errors.gender="",this.errors.company_id="",this.errors.role="",this.errors.password="",this.errors.confirm_password=""},clearForms(){this.form_data.reset()},goToPage(o){g.visit(o,{preserveScroll:!0,preserveState:!0})},formatPhone(){let o=this.form_data.phone_number.replace(/\D/g,"");o.length>0&&o[0]!=="0"&&(o="0"+o),o=o.substring(0,10),o.length<=3?this.form_data.phone_number=o:o.length<=6?this.form_data.phone_number=`${o.slice(0,3)} ${o.slice(3)}`:this.form_data.phone_number=`${o.slice(0,3)} ${o.slice(3,6)} ${o.slice(6)}`}}},F={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},N={class:"modal-dialog modal-dialog-centered modal-xl"},P={class:"modal-content"},D={class:"modal-header"},O={class:"modal-title fs-5",id:"staticBackdropLabel"},I={class:"modal-body"},j={class:"d-flex gap-5"},A={style:{width:"65%"}},R={class:"d-flex gap-5"},q={class:"w-50"},G={class:"mb-3"},H=["readonly"],W={class:"invalid-feedback"},z={class:"mb-3"},J=["readonly"],K={class:"invalid-feedback"},Q={class:"mb-3"},X=["disabled"],Y=["value"],Z={class:"invalid-feedback"},ss={key:0,class:"mb-3"},es=["placeholder"],os={class:"invalid-feedback"},ts={class:"mb-3"},as=["disabled"],ls={class:"invalid-feedback"},rs={class:"w-50"},ns={class:"mb-3"},ds=["readonly"],is={class:"invalid-feedback"},ms={class:"mb-3"},cs=["readonly"],us={class:"invalid-feedback"},fs={class:"mb-3"},_s=["disabled"],bs={class:"invalid-feedback"},ps={key:0,class:"mb-3"},hs=["placeholder"],vs={class:"invalid-feedback"},ys={class:"mb-3"},gs=["disabled"],ws={class:"invalid-feedback"},ks={style:{width:"35%"},class:"d-flex justify-content-center align-items-center"},Cs={class:"mb-3"},xs={id:"preview-wrapper"},Es=["src"],Us={key:1,src:k,id:"logo-preview",alt:""},Ls={key:0,for:"logo",class:"form-label"},Bs={key:0,class:"modal-footer"},Vs={class:"modal fade",id:"deleteModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Ss={class:"modal-dialog modal-dialog-centered"},Ms={class:"modal-content"},Ts={class:"modal-footer"},Fs={class:"Report-wrapper"},Ns={class:"d-flex justify-content-between align-items-center"},Ps={class:"search-container"},Ds={class:"txt-search"},Os=["disabled"],Is={key:0,class:"alert alert-success alert-dismissible fade show mb-0",role:"alert"},js={class:"d-flex align-items-center gap-2"},As={key:1,class:"table-container"},Rs={class:"company-logo"},qs={key:0,src:S,alt:""},Gs=["src"],Hs={class:"text-uppercase"},Ws=["onClick"],zs=["onClick"],Js=["onClick"],Ks={key:2,class:"pagination"},Qs=["disabled","onClick","innerHTML"],Xs={key:3,class:"not-found-msg"},Ys={key:4,class:"not-found-msg"};function Zs(o,e,i,_,t,d){const C=E("MainLayout");return l(),U(C,null,{default:L(()=>[s("div",F,[s("div",N,[s("div",P,[s("div",D,[s("h1",O,n(t.form_data.id?t.form_data.readonly?"View User":"Edit User":"New User"),1),e[17]||(e[17]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),s("div",I,[s("form",j,[s("div",A,[s("div",R,[s("div",q,[s("div",G,[e[18]||(e[18]=s("label",{for:"fname",class:"form-label"},"First Name",-1)),m(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.form_data.firstname=a),readonly:t.form_data.readonly,tabindex:"1",class:c(["form-control",{"is-invalid":t.errors.firstname!==""}]),id:"fname",placeholder:"Enter First Name*"},null,10,H),[[f,t.form_data.firstname]]),s("div",W,n(t.errors.firstname),1)]),s("div",z,[e[19]||(e[19]=s("label",{for:"email",class:"form-label"},"Email address",-1)),m(s("input",{type:"email",readonly:t.form_data.readonly,tabindex:"3","onUpdate:modelValue":e[1]||(e[1]=a=>t.form_data.email=a),class:c(["form-control",{"is-invalid":t.errors.email!==""}]),id:"email",placeholder:"Enter Email Address*"},null,10,J),[[f,t.form_data.email]]),s("div",K,n(t.errors.email),1)]),s("div",Q,[e[21]||(e[21]=s("label",{for:"company",class:"form-label"},"Company",-1)),m(s("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.form_data.company_id=a),tabindex:"5",id:"company",class:c(["form-control",{"is-invalid":t.errors.company_id!==""}]),disabled:t.form_data.readonly},[e[20]||(e[20]=s("option",{value:"",disabled:""},"Choose Company",-1)),(l(!0),r(h,null,v(i.companies,(a,b)=>(l(),r("option",{value:a.id,key:"company"+b},n(a.name),9,Y))),128))],10,X),[[p,t.form_data.company_id]]),s("div",Z,n(t.errors.company_id),1)]),t.form_data.readonly?u("",!0):(l(),r("div",ss,[e[22]||(e[22]=s("label",{for:"password",class:"form-label"},"Password",-1)),m(s("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=a=>t.form_data.password=a),tabindex:"7",class:c(["form-control",{"is-invalid":t.errors.password!==""}]),id:"password",placeholder:t.form_data.id?"Leave blank if you don't want to change password":"Enter Password*"},null,10,es),[[f,t.form_data.password]]),s("div",os,n(t.errors.password),1)])),s("div",ts,[e[24]||(e[24]=s("label",{for:"role",class:"form-label"},"Role",-1)),m(s("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>t.form_data.role=a),id:"role",tabindex:"9",class:c(["form-control",{"is-invalid":t.errors.role!==""}]),disabled:t.form_data.readonly},e[23]||(e[23]=[s("option",{value:"",disabled:""},"Choose Role",-1),s("option",{value:"ceo"},"CEO",-1),s("option",{value:"admin"},"Admin",-1)]),10,as),[[p,t.form_data.role]]),s("div",ls,n(t.errors.role),1)])]),s("div",rs,[s("div",ns,[e[25]||(e[25]=s("label",{for:"lname",class:"form-label"},"Last Name",-1)),m(s("input",{type:"text",readonly:t.form_data.readonly,"onUpdate:modelValue":e[5]||(e[5]=a=>t.form_data.lastname=a),tabindex:"2",class:c(["form-control",{"is-invalid":t.errors.lastname!==""}]),id:"lname",placeholder:"Enter Last Name*"},null,10,ds),[[f,t.form_data.lastname]]),s("div",is,n(t.errors.lastname),1)]),s("div",ms,[e[26]||(e[26]=s("label",{for:"phone_number",class:"form-label"},"Phone Number",-1)),m(s("input",{type:"text",readonly:t.form_data.readonly,tabindex:"4","onUpdate:modelValue":e[6]||(e[6]=a=>t.form_data.phone_number=a),onInput:e[7]||(e[7]=(...a)=>d.formatPhone&&d.formatPhone(...a)),class:c(["form-control",{"is-invalid":t.errors.phone_number!==""}]),id:"phone_number",placeholder:"012 345 6789"},null,42,cs),[[f,t.form_data.phone_number]]),s("div",us,n(t.errors.phone_number),1)]),s("div",fs,[e[28]||(e[28]=s("label",{for:"gender",class:"form-label"},"Gender",-1)),m(s("select",{"onUpdate:modelValue":e[8]||(e[8]=a=>t.form_data.gender=a),tabindex:"6",id:"gender",class:c(["form-control",{"is-invalid":t.errors.gender!==""}]),disabled:t.form_data.readonly},e[27]||(e[27]=[s("option",{value:"",disabled:""},"Choose Gender",-1),s("option",{value:"Male"},"Male",-1),s("option",{value:"Female"},"Female",-1)]),10,_s),[[p,t.form_data.gender]]),s("div",bs,n(t.errors.gender),1)]),t.form_data.readonly?u("",!0):(l(),r("div",ps,[e[29]||(e[29]=s("label",{for:"cf_password",class:"form-label"},"Confirm Password",-1)),m(s("input",{type:"password",tabindex:"8","onUpdate:modelValue":e[9]||(e[9]=a=>t.form_data.confirm_password=a),class:c(["form-control",{"is-invalid":t.errors.confirm_password!==""}]),id:"cf_password",placeholder:t.form_data.id?"Leave blank if you don't want to change password":"Enter Confirm Password*"},null,10,hs),[[f,t.form_data.confirm_password]]),s("div",vs,n(t.errors.confirm_password),1)])),s("div",ys,[e[31]||(e[31]=s("label",{for:"status",class:"form-label"},"Status",-1)),m(s("select",{"onUpdate:modelValue":e[10]||(e[10]=a=>t.form_data.status=a),tabindex:"10",id:"status",class:c(["form-control",{"is-invalid":t.errors.status!==""}]),disabled:t.form_data.readonly},e[30]||(e[30]=[s("option",{value:"",disabled:""},"Choose Status",-1),s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1)]),10,gs),[[p,t.form_data.status]]),s("div",ws,n(t.errors.status),1)])])])]),s("div",ks,[s("div",Cs,[s("div",xs,[t.form_data.old_photo?(l(),r("img",{key:0,src:"/images/users/"+t.form_data.old_photo,id:"logo-preview",alt:""},null,8,Es)):(l(),r("img",Us))]),t.form_data.readonly?u("",!0):(l(),r("label",Ls,"Profile")),m(s("input",{tabindex:"11",type:"file",class:"form-control",id:"logo",onChange:e[11]||(e[11]=(...a)=>d.onChangeFile&&d.onChangeFile(...a)),onchange:"document.getElementById('logo-preview').src = window.URL.createObjectURL(this.files[0])"},null,544),[[B,!t.form_data.readonly]])])])])]),t.form_data.readonly?u("",!0):(l(),r("div",Bs,[e[32]||(e[32]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),t.form_data.id?(l(),r("button",{key:1,tabindex:"12",onClick:e[13]||(e[13]=(...a)=>d.saveEdit&&d.saveEdit(...a)),type:"button",class:"btn btn-primary"},"Save")):(l(),r("button",{key:0,onClick:e[12]||(e[12]=(...a)=>d.save&&d.save(...a)),type:"button",class:"btn btn-primary"},"Save"))]))])])]),s("div",Vs,[s("div",Ss,[s("div",Ms,[e[34]||(e[34]=s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Delete User?"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[35]||(e[35]=s("div",{class:"modal-body"},[s("h4",null,"Are you sure delete this users?")],-1)),s("div",Ts,[e[33]||(e[33]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),s("button",{onClick:e[14]||(e[14]=(...a)=>d.onCfDelete&&d.onCfDelete(...a)),type:"button",class:"btn btn-danger"},"Delete")])])])]),s("div",Fs,[s("div",Ns,[s("div",Ps,[s("div",Ds,[e[36]||(e[36]=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),m(s("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=a=>t.search=a),onInput:e[16]||(e[16]=(...a)=>d.searchItems&&d.searchItems(...a)),placeholder:"Search name, email or phone number",disabled:!this.filters.search&&i.users.data.length==0,autocomplete:"off"},null,40,Os),[[f,t.search]])])]),e[37]||(e[37]=s("button",{class:"primary-button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},[s("i",{class:"fa-solid fa-plus"}),V("  New User")],-1))]),t.success.show?(l(),r("div",Is,[s("div",js,[e[38]||(e[38]=s("i",{class:"fa-solid fa-circle-check"},null,-1)),s("span",null,n(t.success.message),1)]),e[39]||(e[39]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):u("",!0),i.users.data.length>0?(l(),r("div",As,[s("table",null,[e[43]||(e[43]=s("thead",null,[s("tr",null,[s("th",null,"ID"),s("th",null,"Photo"),s("th",null,"Name"),s("th",null,"Email"),s("th",null,"Company"),s("th",null,"Role"),s("th",null,"Status"),s("th",null,"Action")])],-1)),s("tbody",null,[(l(!0),r(h,null,v(i.users.data,(a,b)=>(l(),r("tr",{key:"company_list"+b},[s("td",null,n(b+1),1),s("td",null,[s("div",Rs,[a.photo?(l(),r("img",{key:1,src:"/images/users/"+a.photo,onerror:"this.src='error-image.jpg'",alt:""},null,8,Gs)):(l(),r("img",qs))])]),s("td",null,n(a.firstname+" "+a.lastname),1),s("td",null,n(a.email),1),s("td",null,n(a.company.name),1),s("td",Hs,n(a.roles[0].name),1),s("td",null,[s("span",{class:c(a.status=="active"?"status-badge-success":"status-badge-danger")},null,2)]),s("td",null,[s("button",{onClick:y=>d.onDelete(a),class:"btn btn-outline-danger"},e[40]||(e[40]=[s("i",{class:"fa-solid fa-trash"},null,-1)]),8,Ws),s("button",{onClick:y=>d.onEdit(a),class:"btn btn-outline-success mx-2"},e[41]||(e[41]=[s("i",{class:"fa-solid fa-pen-to-square"},null,-1)]),8,zs),s("button",{onClick:y=>d.onView(a),class:"btn btn-outline-primary"},e[42]||(e[42]=[s("i",{class:"fa-solid fa-eye"},null,-1)]),8,Js)])]))),128))])])])):u("",!0),i.users.data.length>0?(l(),r("div",Ks,[(l(!0),r(h,null,v(i.users.links,a=>(l(),r("button",{key:a.label,disabled:!a.url,onClick:b=>d.goToPage(a.url),innerHTML:a.label,class:c(["px-2 pagination-item",{"pagination-item-active":a.active}])},null,10,Qs))),128))])):u("",!0),this.filters.search&&i.users.data.length==0?(l(),r("span",Xs,"No record founded.")):u("",!0),!this.filters.search&&i.users.data.length==0?(l(),r("span",Ys,"No record.")):u("",!0)])]),_:1})}const ae=M(T,[["render",Zs]]);export{ae as default};
