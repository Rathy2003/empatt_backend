import{M as w}from"./MainLayout-jHNAjvfH.js";import{r as L,i as E,o as l,h as x,b as e,t as d,w as b,n as m,v as f,c as n,e as u,d as B,F as p,j as g,W as _,x as y}from"./app-BbAuhPIs.js";import{_ as v}from"./No-Image-Placeholder.svg-BHQ-ZzRC.js";import{_ as T}from"./no-image-CSNqFI6u.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={components:{MainLayout:w},props:{companies:Array,filters:Object},mounted(){let t=this;$("#staticBackdrop").on("hide.bs.modal",function(){t.clearForms(),t.clearErrors(),document.getElementById("logo-preview").src=v,document.querySelector("input[type=file]").value=""}),$("#deleteModal").on("hide.bs.modal",function(){t.form_data.id=null})},data(){return{success:{show:!1,message:""},form_data:y({id:null,name:"",email:"",phone_number:"",logo:null,old_logo:null}),errors:{name:"",email:"",phone_number:"",logo:""},search:this.filters.search||"",debounceTimer:null}},methods:{searchItems(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{_.get(route("company"),{search:this.search},{preserveState:!0,replace:!0})},300)},save(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"});let t=this;this.clearErrors(),this.form_data.post(route("createCompany"),{onSuccess:function(s){$("#staticBackdrop").modal("hide"),t.clearForms(),t.success.show=!0,t.success.message="Company created successfully",$.LoadingOverlay("hide"),setTimeout(()=>{t.success.show=!1,t.success.message=""},3e3)},onError:s=>{Object.keys(s).forEach(c=>{this.errors[c]=s[c]}),console.log(this.errors),$.LoadingOverlay("hide")}})},saveEdit(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"});let t=this;this.clearErrors(),this.form_data.post(route("saveEditCompany"),{onSuccess:function(s){$("#staticBackdrop").modal("hide"),t.clearForms(),t.success.show=!0,t.success.message="Company updated successfully",$.LoadingOverlay("hide"),setTimeout(()=>{t.success.show=!1,t.success.message=""},3e3)},onError:s=>{Object.keys(s).forEach(c=>{this.errors[c]=s[c]}),console.log(this.errors),$.LoadingOverlay("hide")}})},onEdit(t){this.form_data.id=t.id,this.form_data.name=t.name,this.form_data.email=t.email,this.form_data.phone_number=t.phone_number,this.form_data.old_logo=t.logo,$("#staticBackdrop").modal("show")},onDelete(t){this.form_data.id=t.id,console.log(this.form_data.id),$("#deleteModal").modal("show")},onCfDelete(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"});let t=this;y({id:this.form_data.id}).post(route("deleteCompany"),{onSuccess:()=>{$("#deleteModal").modal("hide"),t.success.show=!0,t.success.message="Company deleted successfully",$.LoadingOverlay("hide"),setTimeout(()=>{t.success.show=!1,t.success.message=""},3e3)},onError:i=>{$.LoadingOverlay("hide"),console.log(i)}})},onChangeFile(t){let s=t.target.files[0];s&&(this.form_data.logo=s)},clearErrors(){this.errors.name="",this.errors.email="",this.errors.phone_number="",this.errors.logo=""},clearForms(){this.form_data.id=null,this.form_data.name="",this.form_data.email="",this.form_data.phone_number="",this.form_data.logo=null,this.form_data.old_logo=null},goToPage(t){_.visit(t,{preserveScroll:!0,preserveState:!0})}}},M={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},S={class:"modal-dialog modal-dialog-centered modal-lg"},D={class:"modal-content"},j={class:"modal-header"},F={class:"modal-title fs-5",id:"staticBackdropLabel"},I={class:"modal-body"},V={class:"d-flex gap-5"},U={class:"w-50"},P={class:"mb-3"},A={class:"invalid-feedback"},R={class:"mb-3"},q={class:"invalid-feedback"},H={class:"mb-3"},W={class:"invalid-feedback"},z={class:"w-50"},G={class:"mb-3"},J={id:"preview-wrapper"},K=["src"],Q={key:1,src:v,id:"logo-preview",alt:""},X={class:"invalid-feedback"},Y={class:"modal-footer"},Z={class:"modal fade",id:"deleteModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},ee={class:"modal-dialog modal-dialog-centered"},se={class:"modal-content"},oe={class:"modal-footer"},te={class:"Report-wrapper"},ae={class:"d-flex justify-content-between align-items-center"},le={class:"search-container"},ne={class:"txt-search"},re=["disabled"],ie={key:0,class:"alert alert-success alert-dismissible fade show mb-0",role:"alert"},de={class:"d-flex align-items-center gap-2"},me={key:1,class:"table-container"},ce={class:"company-logo"},ue={key:0,src:T,alt:""},be=["src"],fe=["onClick"],he=["onClick"],pe={key:2,class:"pagination"},ge=["disabled","onClick","innerHTML"],_e={key:3,class:"not-found-msg"},ye={key:4,class:"not-found-msg"};function ve(t,s,i,c,a,r){const k=L("MainLayout");return l(),E(k,null,{default:x(()=>[e("div",M,[e("div",S,[e("div",D,[e("div",j,[e("h1",F,d(a.form_data.id?"Edit Company":"New Company"),1),s[9]||(s[9]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",I,[e("form",V,[e("div",U,[e("div",P,[s[10]||(s[10]=e("label",{for:"company-name",class:"form-label"},"Company Name",-1)),b(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>a.form_data.name=o),class:m(["form-control",{"is-invalid":a.errors.name!==""}]),id:"company-name",placeholder:"Enter Company Name*"},null,2),[[f,a.form_data.name]]),e("div",A,d(a.errors.name),1)]),e("div",R,[s[11]||(s[11]=e("label",{for:"email",class:"form-label"},"Email address",-1)),b(e("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=o=>a.form_data.email=o),class:m(["form-control",{"is-invalid":a.errors.email!==""}]),id:"email",placeholder:"Leave blank if you don't want to add email"},null,2),[[f,a.form_data.email]]),e("div",q,d(a.errors.email),1)]),e("div",H,[s[12]||(s[12]=e("label",{for:"phone_number",class:"form-label"},"Phone Number",-1)),b(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>a.form_data.phone_number=o),class:m(["form-control",{"is-invalid":a.errors.phone_number!==""}]),id:"phone_number",placeholder:"Leave blank if you don't want to add phone number"},null,2),[[f,a.form_data.phone_number]]),e("div",W,d(a.errors.phone_number),1)])]),e("div",z,[e("div",G,[e("div",J,[a.form_data.old_logo?(l(),n("img",{key:0,src:"/images/logo/"+a.form_data.old_logo,id:"logo-preview",alt:""},null,8,K)):(l(),n("img",Q))]),e("label",{for:"logo",class:m(["form-label",{"is-invalid":a.errors.logo!==""}])},"Logo",2),e("input",{type:"file",class:"form-control",id:"logo",accept:"image/png, image/webp, image/jpeg, image/jpg",onChange:s[3]||(s[3]=(...o)=>r.onChangeFile&&r.onChangeFile(...o)),onchange:"document.getElementById('logo-preview').src = window.URL.createObjectURL(this.files[0])"},null,32),e("div",X,d(a.errors.logo),1)])])])]),e("div",Y,[s[13]||(s[13]=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),a.form_data.id?(l(),n("button",{key:1,onClick:s[5]||(s[5]=(...o)=>r.saveEdit&&r.saveEdit(...o)),type:"button",class:"btn btn-primary"},"Save")):(l(),n("button",{key:0,onClick:s[4]||(s[4]=(...o)=>r.save&&r.save(...o)),type:"button",class:"btn btn-primary"},"Save"))])])])]),e("div",Z,[e("div",ee,[e("div",se,[s[15]||(s[15]=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Delete Company?"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s[16]||(s[16]=e("div",{class:"modal-body"},[e("h4",null,"Are you sure delete this company?")],-1)),e("div",oe,[s[14]||(s[14]=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),e("button",{onClick:s[6]||(s[6]=(...o)=>r.onCfDelete&&r.onCfDelete(...o)),type:"button",class:"btn btn-danger"},"Delete")])])])]),e("div",te,[e("div",ae,[e("div",le,[e("div",ne,[s[17]||(s[17]=e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),b(e("input",{type:"text","onUpdate:modelValue":s[7]||(s[7]=o=>a.search=o),onInput:s[8]||(s[8]=(...o)=>r.searchItems&&r.searchItems(...o)),placeholder:"Search name, email or phone number",disabled:!this.filters.search&&i.companies.data.length==0},null,40,re),[[f,a.search]])])]),s[18]||(s[18]=e("button",{class:"primary-button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},[e("i",{class:"fa-solid fa-plus"}),B("  New Company")],-1))]),a.success.show?(l(),n("div",ie,[e("div",de,[s[19]||(s[19]=e("i",{class:"fa-solid fa-circle-check"},null,-1)),e("span",null,d(a.success.message),1)]),s[20]||(s[20]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):u("",!0),i.companies.data.length>0?(l(),n("div",me,[e("table",null,[s[23]||(s[23]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Logo"),e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Phone Number"),e("th",null,"Action")])],-1)),e("tbody",null,[(l(!0),n(p,null,g(i.companies.data,(o,h)=>(l(),n("tr",{key:"company_list"+h},[e("td",null,d(h+1),1),e("td",null,[e("div",ce,[o.logo?(l(),n("img",{key:1,src:"/images/logo/"+o.logo,onerror:"this.src='error-image.jpg'",alt:""},null,8,be)):(l(),n("img",ue))])]),e("td",null,d(o.name),1),e("td",{class:m({"text-muted":!o.email})},d(o.email?o.email:"(null)"),3),e("td",{class:m({"text-muted":!o.phone_number})},d(o.phone_number?o.phone_number:"(null)"),3),e("td",null,[e("button",{onClick:C=>r.onDelete(o),class:"btn btn-outline-danger"},s[21]||(s[21]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,fe),e("button",{onClick:C=>r.onEdit(o),class:"btn btn-outline-primary mx-2"},s[22]||(s[22]=[e("i",{class:"fa-solid fa-pen-to-square"},null,-1)]),8,he)])]))),128))])])])):u("",!0),i.companies.data.length>0?(l(),n("div",pe,[(l(!0),n(p,null,g(i.companies.links,o=>(l(),n("button",{key:o.label,disabled:!o.url,onClick:h=>r.goToPage(o.url),innerHTML:o.label,class:m(["px-2 pagination-item",{"pagination-item-active":o.active}])},null,10,ge))),128))])):u("",!0),this.filters.search&&i.companies.data.length==0?(l(),n("span",_e,"No record founded.")):u("",!0),!this.filters.search&&i.companies.data.length==0?(l(),n("span",ye,"No record.")):u("",!0)])]),_:1})}const xe=O(N,[["render",ve]]);export{xe as default};
