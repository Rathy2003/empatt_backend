import{M as g}from"./MainLayout-vZCMMv3O.js";import{r as P,i as w,o as i,f as k,b as s,t as r,w as c,c as a,e as m,n as b,v as h,d as C,F as f,j as p,x as y}from"./app-D2HYKBzG.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={components:{MainLayout:g},props:{errors:Object,positions:Array,filters:Object},mounted(){$("#addPositionModal").on("hidden.bs.modal",()=>{this.clearForms()}),$("#deletePositionModal").on("hidden.bs.modal",()=>{this.clearForms()})},data(){return{success:{show:!1,message:""},search:this.filters.search||"",debounceTimer:null,form_data:y({id:null,name:null,description:null})}},methods:{searchItems(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.$inertia.get(route("position.index"),{search:this.search},{preserveState:!0})},500)},clearForms(){this.form_data=y({id:null,name:null,description:null})},submitForm(){$.LoadingOverlay("show");let o=this.form_data.id?route("position.update",this.form_data.id):route("position.store");this.form_data.post(o,{onFinish:t=>{this.errors.name||($("#addPositionModal").modal("hide"),this.clearForms(),$.LoadingOverlay("hide"),this.success.show=!0,this.success.message="Position added successfully",setTimeout(()=>{this.success.show=!1,this.success.message=""},3e3))},onError:t=>{alert("Something went wrong"),$.LoadingOverlay("hide")}})},editPosition(o){this.form_data.id=o.id,this.form_data.name=o.name,this.form_data.description=o.description,$("#addPositionModal").modal("show")},deletePosition(o){this.form_data.id=o.id,$("#deletePositionModal").modal("show")},deletePositionConfirm(){$.LoadingOverlay("show"),this.form_data.post(route("position.delete"),{onFinish:o=>{$("#deletePositionModal").modal("hide"),this.clearForms(),$.LoadingOverlay("hide"),this.success.show=!0,this.success.message="Position deleted successfully",setTimeout(()=>{this.success.show=!1,this.success.message=""},3e3)},onError:o=>{alert("Something went wrong"),$.LoadingOverlay("hide")}})}}},L={class:"container"},F={class:"row"},T={class:"modal fade",id:"deletePositionModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"deletePositionModalLabel","aria-hidden":"true"},N={class:"modal-dialog"},O={class:"modal-content"},D={class:"modal-footer"},S={class:"modal fade",id:"addPositionModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"addPositionModalLabel","aria-hidden":"true"},V={class:"modal-dialog"},E={class:"modal-content"},j={class:"modal-header"},A={class:"modal-title",id:"addPositionModalLabel"},B={class:"modal-body"},I={class:"row"},U={class:"form-group mb-3"},H={key:0,class:"invalid-feedback"},q={class:"form-group mb-3"},z={class:"modal-footer"},R={class:"Report-wrapper"},G={class:"d-flex justify-content-between align-items-center"},J={class:"search-container"},K={class:"txt-search"},Q={key:0,class:"alert alert-success alert-dismissible fade show mb-0",role:"alert"},W={class:"d-flex align-items-center gap-2"},X={key:1,class:"table-container"},Y=["onClick"],Z=["onClick"],ss={key:2,class:"pagination"},ts=["disabled","onClick","innerHTML"],es={key:3,class:"not-found-msg"},os={key:4,class:"not-found-msg"};function is(o,t,l,as,n,d){const _=P("MainLayout");return i(),w(_,null,{default:k(()=>[s("div",L,[s("div",F,[s("div",T,[s("div",N,[s("div",O,[t[7]||(t[7]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"deletePositionModalLabel"},"Delete Position"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t[8]||(t[8]=s("div",{class:"modal-body"},[s("p",null,"Are you sure you want to delete this position?")],-1)),s("div",D,[t[6]||(t[6]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),s("button",{onClick:t[0]||(t[0]=(...e)=>d.deletePositionConfirm&&d.deletePositionConfirm(...e)),type:"button",class:"btn btn-danger"},"Delete")])])])]),s("div",S,[s("div",V,[s("div",E,[s("div",j,[s("h5",A,r(n.form_data.id?"Edit Position":"Add Position"),1),t[9]||(t[9]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),s("div",B,[s("div",I,[s("div",U,[t[10]||(t[10]=s("label",{for:"name",class:"form-label mb-2"},"Name",-1)),c(s("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.form_data.name=e),type:"text",class:b([{"is-invalid":l.errors.name},"form-control"]),id:"name",name:"name",placeholder:"Enter position name*"},null,2),[[h,n.form_data.name]]),l.errors.name?(i(),a("div",H,r(l.errors.name),1)):m("",!0)]),s("div",q,[t[11]||(t[11]=s("label",{for:"description",class:"form-label mb-2"},"Description",-1)),c(s("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.form_data.description=e),class:"form-control",rows:"8",id:"description",name:"description",placeholder:"Leave blank if you don't want to add description"},null,512),[[h,n.form_data.description]])])])]),s("div",z,[t[12]||(t[12]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),s("button",{onClick:t[3]||(t[3]=(...e)=>d.submitForm&&d.submitForm(...e)),type:"button",class:"btn btn-primary"},"Save")])])])]),s("div",R,[s("div",G,[s("div",J,[s("div",K,[t[13]||(t[13]=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),c(s("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.search=e),onInput:t[5]||(t[5]=(...e)=>d.searchItems&&d.searchItems(...e)),placeholder:"Search by name"},null,544),[[h,n.search]])])]),t[14]||(t[14]=s("button",{class:"primary-button","data-bs-toggle":"modal","data-bs-target":"#addPositionModal"},[s("i",{class:"fa-solid fa-plus"}),C("  New Position")],-1))]),n.success.show?(i(),a("div",Q,[s("div",W,[t[15]||(t[15]=s("i",{class:"fa-solid fa-circle-check"},null,-1)),s("span",null,r(n.success.message),1)]),t[16]||(t[16]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))])):m("",!0),l.positions.data.length>0?(i(),a("div",X,[s("table",null,[t[19]||(t[19]=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Name"),s("th",null,"Description"),s("th",null,"Action")])],-1)),s("tbody",null,[(i(!0),a(f,null,p(l.positions.data,(e,u)=>(i(),a("tr",{key:"position_list"+u},[s("td",null,r(u+1),1),s("td",null,r(e.name),1),s("td",{class:b({"text-muted":!e.description})},r(e.description?e.description:"(null)"),3),s("td",null,[s("button",{onClick:v=>d.deletePosition(e),class:"btn btn-outline-danger"},t[17]||(t[17]=[s("i",{class:"fa-solid fa-trash"},null,-1)]),8,Y),s("button",{onClick:v=>d.editPosition(e),class:"btn btn-outline-primary mx-2"},t[18]||(t[18]=[s("i",{class:"fa-solid fa-pen-to-square"},null,-1)]),8,Z)])]))),128))])])])):m("",!0),l.positions.data.length>0?(i(),a("div",ss,[(i(!0),a(f,null,p(l.positions.links,e=>(i(),a("button",{key:e.label,disabled:!e.url,onClick:u=>o.goToPage(e.url),innerHTML:e.label,class:b(["px-2 pagination-item",{"pagination-item-active":e.active}])},null,10,ts))),128))])):m("",!0),this.filters.search&&l.positions.data.length==0?(i(),a("span",es,"No record founded.")):m("",!0),!this.filters.search&&l.positions.data.length==0?(i(),a("span",os,"No record.")):m("",!0)])])])]),_:1})}const rs=M(x,[["render",is]]);export{rs as default};
