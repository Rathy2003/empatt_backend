import{M as p}from"./MainLayout-jHNAjvfH.js";import{r as f,i as y,o as a,h as b,b as e,c as n,e as d,w as L,v as k,F as h,j as m,t as r,n as x,W as _,x as C}from"./app-BbAuhPIs.js";import{d as T}from"./dayjs.min-C5o4JPkp.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={components:{MainLayout:p},props:{requestLeaves:Object,filters:Object},data(){return{search:this.filters.search||"",debounceTimer:null}},methods:{searchItems(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{_.get(route("request-leave.index"),{search:this.search},{preserveState:!0,replace:!0})},300)},toggleStatus(o,s){$.LoadingOverlay("show"),C({id:o.id,status:s}).post(route("request-leave.update-status"),{onSuccess:()=>{$.LoadingOverlay("hide")},onError:()=>{console.log("Error")}})},goToPage(o){_.visit(o,{preserveScroll:!0,preserveState:!0})},formatDate(o){return T(o).format("DD-MMM-YYYY hh:mm:ss A")}}},S={class:"container"},D={class:"row"},j={class:"Report-wrapper"},w={class:"d-flex justify-content-between align-items-center"},I={class:"search-container"},B={class:"txt-search"},E=["disabled"],N={key:0,class:"table-container"},O=["onClick"],R=["onClick"],Y={key:1,class:"pagination"},A=["disabled","onClick","innerHTML"],V={key:2,class:"not-found-msg"};function F(o,s,l,H,i,u){const v=f("MainLayout");return a(),y(v,null,{default:b(()=>[e("div",S,[e("div",D,[e("div",j,[e("div",w,[e("div",I,[e("div",B,[s[2]||(s[2]=e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),L(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>i.search=t),onInput:s[1]||(s[1]=(...t)=>u.searchItems&&u.searchItems(...t)),placeholder:"Search by employee name",disabled:!this.filters.search&&l.requestLeaves.data.length==0,autocomplete:"off"},null,40,E),[[k,i.search]])])])]),l.requestLeaves.data.length>0?(a(),n("div",N,[e("table",null,[s[3]||(s[3]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Employee Name"),e("th",null,"Title"),e("td",null,"Reason"),e("td",null,"Duration"),e("th",null,"Created At"),e("th",null,"Status")])],-1)),e("tbody",null,[(a(!0),n(h,null,m(l.requestLeaves.data,(t,c)=>(a(),n("tr",{key:"employee_list"+c},[e("td",null,r(c+1),1),e("td",null,r(t.employee.firstname)+" "+r(t.employee.lastname),1),e("td",null,r(t.title),1),e("td",null,r(t.reason),1),e("td",null,r(t.duration)+" Days",1),e("td",null,r(u.formatDate(t.created_at)),1),e("td",null,[t.status==="pending"||t.status==="accepted"?(a(),n("button",{key:0,onClick:g=>u.toggleStatus(t,"rejected"),class:"btn btn-danger"},"Reject",8,O)):d("",!0),t.status==="pending"||t.status==="rejected"?(a(),n("button",{key:1,onClick:g=>u.toggleStatus(t,"accepted"),class:"btn btn-success mx-3"},"Accept",8,R)):d("",!0)])]))),128))])])])):d("",!0),l.requestLeaves.data.length>0?(a(),n("div",Y,[(a(!0),n(h,null,m(l.requestLeaves.links,t=>(a(),n("button",{key:t.label,disabled:!t.url,onClick:c=>u.goToPage(t.url),innerHTML:t.label,class:x(["px-2 pagination-item",{"pagination-item-active":t.active}])},null,10,A))),128))])):d("",!0),l.requestLeaves.data.length==0?(a(),n("span",V,"No record.")):d("",!0)])])])]),_:1})}const G=q(M,[["render",F],["__scopeId","data-v-402a4703"]]);export{G as default};
