import{M as E}from"./MainLayout-BnnnTmoP.js";import{k as w,c as L,o as l,w as x,b as e,t as d,j as u,n as c,l as b,f as n,h as f,e as B,F as p,m as _,W as g,x as y}from"./app-X9y9n1zk.js";import{_ as v,a as N}from"./no-image-Cky2czAe.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={components:{MainLayout:E},props:{companies:Array,filters:Object},mounted(){let s=this;$("#staticBackdrop").on("hide.bs.modal",function(){s.clearForms(),s.clearErrors(),document.getElementById("logo-preview").src=v,document.querySelector("input[type=file]").value=""}),$("#deleteModal").on("hide.bs.modal",function(){s.form_data.id=null})},data(){return{form_data:y({id:null,name:"",email:"",phone_number:"",logo:null,old_logo:null}),errors:{name:"",email:"",phone_number:"",logo:""},search:this.filters.search||"",debounceTimer:null}},methods:{searchItems(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{g.get(route("company"),{search:this.search},{preserveState:!0,replace:!0})},300)},save(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"});let s=this;this.clearErrors(),this.form_data.post(route("createCompany"),{onSuccess:function(o){$("#staticBackdrop").modal("hide"),s.clearForms()},onError:o=>{Object.keys(o).forEach(m=>{this.errors[m]=o[m]}),console.log(this.errors)}}),$.LoadingOverlay("hide")},saveEdit(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"});let s=this;this.clearErrors(),this.form_data.post(route("saveEditCompany"),{onSuccess:function(o){$("#staticBackdrop").modal("hide"),s.clearForms()},onError:o=>{Object.keys(o).forEach(m=>{this.errors[m]=o[m]}),console.log(this.errors)}}),$.LoadingOverlay("hide")},onEdit(s){this.form_data.id=s.id,this.form_data.name=s.name,this.form_data.email=s.email,this.form_data.phone_number=s.phone_number,this.form_data.old_logo=s.logo,$("#staticBackdrop").modal("show")},onDelete(s){this.form_data.id=s.id,console.log(this.form_data.id),$("#deleteModal").modal("show")},onCfDelete(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"}),y({id:this.form_data.id}).post(route("deleteCompany"),{onSuccess:()=>$("#deleteModal").modal("hide"),onError:o=>{console.log(o)}}),$.LoadingOverlay("hide")},onChangeFile(s){let o=s.target.files[0];o&&(this.form_data.logo=o)},clearErrors(){this.errors.name="",this.errors.email="",this.errors.phone_number="",this.errors.logo=""},clearForms(){this.form_data.id=null,this.form_data.name="",this.form_data.email="",this.form_data.phone_number="",this.form_data.logo=null,this.form_data.old_logo=null},goToPage(s){g.visit(s,{preserveScroll:!0,preserveState:!0})}}},T={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},D={class:"modal-dialog modal-dialog-centered modal-lg"},O={class:"modal-content"},j={class:"modal-header"},F={class:"modal-title fs-5",id:"staticBackdropLabel"},I={class:"modal-body"},V={class:"d-flex gap-5"},U={class:"w-50"},P={class:"mb-3"},A={class:"invalid-feedback"},R={class:"mb-3"},q={class:"invalid-feedback"},H={class:"mb-3"},W={class:"invalid-feedback"},z={class:"w-50"},G={class:"mb-3"},J={id:"preview-wrapper"},K=["src"],Q={key:1,src:v,id:"logo-preview",alt:""},X={class:"invalid-feedback"},Y={class:"modal-footer"},Z={class:"modal fade",id:"deleteModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},ee={class:"modal-dialog modal-dialog-centered"},oe={class:"modal-content"},te={class:"modal-footer"},se={class:"Report-wrapper"},ae={class:"d-flex justify-content-between align-items-center"},le={class:"search-container"},ne={class:"txt-search"},re=["disabled"],ie={key:0,class:"table-container"},de={class:"company-logo"},me={key:0,src:N,alt:""},ce=["src"],ue=["onClick"],be=["onClick"],fe={key:1,class:"pagination"},he=["disabled","onClick","innerHTML"],pe={key:2,class:"not-found-msg"},_e={key:3,class:"not-found-msg"};function ge(s,o,i,m,a,r){const k=w("MainLayout");return l(),L(k,null,{default:x(()=>[e("div",T,[e("div",D,[e("div",O,[e("div",j,[e("h1",F,d(a.form_data.id?"Edit Company":"New Company"),1),o[9]||(o[9]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",I,[e("form",V,[e("div",U,[e("div",P,[o[10]||(o[10]=e("label",{for:"company-name",class:"form-label"},"Company Name",-1)),u(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>a.form_data.name=t),class:c(["form-control",{"is-invalid":a.errors.name!==""}]),id:"company-name",placeholder:"Enter Company Name*"},null,2),[[b,a.form_data.name]]),e("div",A,d(a.errors.name),1)]),e("div",R,[o[11]||(o[11]=e("label",{for:"email",class:"form-label"},"Email address",-1)),u(e("input",{type:"email","onUpdate:modelValue":o[1]||(o[1]=t=>a.form_data.email=t),class:c(["form-control",{"is-invalid":a.errors.email!==""}]),id:"email",placeholder:"Enter Email Address*"},null,2),[[b,a.form_data.email]]),e("div",q,d(a.errors.email),1)]),e("div",H,[o[12]||(o[12]=e("label",{for:"phone_number",class:"form-label"},"Phone Number",-1)),u(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=t=>a.form_data.phone_number=t),class:c(["form-control",{"is-invalid":a.errors.phone_number!==""}]),id:"phone_number",placeholder:"Enter Phone Number*"},null,2),[[b,a.form_data.phone_number]]),e("div",W,d(a.errors.phone_number),1)])]),e("div",z,[e("div",G,[e("div",J,[a.form_data.old_logo?(l(),n("img",{key:0,src:"/images/logo/"+a.form_data.old_logo,id:"logo-preview",alt:""},null,8,K)):(l(),n("img",Q))]),e("label",{for:"logo",class:c(["form-label",{"is-invalid":a.errors.logo!==""}])},"Logo",2),e("input",{type:"file",class:"form-control",id:"logo",accept:"image/png, image/webp, image/jpeg, image/jpg",onChange:o[3]||(o[3]=(...t)=>r.onChangeFile&&r.onChangeFile(...t)),onchange:"document.getElementById('logo-preview').src = window.URL.createObjectURL(this.files[0])"},null,32),e("div",X,d(a.errors.logo),1)])])])]),e("div",Y,[o[13]||(o[13]=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),a.form_data.id?(l(),n("button",{key:1,onClick:o[5]||(o[5]=(...t)=>r.saveEdit&&r.saveEdit(...t)),type:"button",class:"btn btn-primary"},"Save")):(l(),n("button",{key:0,onClick:o[4]||(o[4]=(...t)=>r.save&&r.save(...t)),type:"button",class:"btn btn-primary"},"Save"))])])])]),e("div",Z,[e("div",ee,[e("div",oe,[o[15]||(o[15]=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Delete Company?"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),o[16]||(o[16]=e("div",{class:"modal-body"},[e("h4",null,"Are you sure delete this company?")],-1)),e("div",te,[o[14]||(o[14]=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),e("button",{onClick:o[6]||(o[6]=(...t)=>r.onCfDelete&&r.onCfDelete(...t)),type:"button",class:"btn btn-danger"},"Delete")])])])]),e("div",se,[e("div",ae,[e("div",le,[e("div",ne,[o[17]||(o[17]=e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),u(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=t=>a.search=t),onInput:o[8]||(o[8]=(...t)=>r.searchItems&&r.searchItems(...t)),placeholder:"Search name, email or phone number",disabled:!this.filters.search&&i.companies.data.length==0},null,40,re),[[b,a.search]])])]),o[18]||(o[18]=e("button",{class:"primary-button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},[e("i",{class:"fa-solid fa-plus"}),B("  New Company")],-1))]),i.companies.data.length>0?(l(),n("div",ie,[e("table",null,[o[21]||(o[21]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Logo"),e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Phone Number"),e("th",null,"Action")])],-1)),e("tbody",null,[(l(!0),n(p,null,_(i.companies.data,(t,h)=>(l(),n("tr",{key:"company_list"+h},[e("td",null,d(h+1),1),e("td",null,[e("div",de,[t.logo?(l(),n("img",{key:1,src:"/images/logo/"+t.logo,onerror:"this.src='error-image.jpg'",alt:""},null,8,ce)):(l(),n("img",me))])]),e("td",null,d(t.name),1),e("td",null,d(t.email),1),e("td",null,d(t.phone_number),1),e("td",null,[e("button",{onClick:C=>r.onDelete(t),class:"btn btn-outline-danger"},o[19]||(o[19]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,ue),e("button",{onClick:C=>r.onEdit(t),class:"btn btn-outline-primary mx-2"},o[20]||(o[20]=[e("i",{class:"fa-solid fa-pen-to-square"},null,-1)]),8,be)])]))),128))])])])):f("",!0),i.companies.data.length>0?(l(),n("div",fe,[(l(!0),n(p,null,_(i.companies.links,t=>(l(),n("button",{key:t.label,disabled:!t.url,onClick:h=>r.goToPage(t.url),innerHTML:t.label,class:c(["px-2 pagination-item",{"pagination-item-active":t.active}])},null,10,he))),128))])):f("",!0),this.filters.search&&i.companies.data.length==0?(l(),n("span",pe,"No record founded.")):f("",!0),!this.filters.search&&i.companies.data.length==0?(l(),n("span",_e,"No record.")):f("",!0)])]),_:1})}const Ee=M(S,[["render",ge]]);export{Ee as default};
