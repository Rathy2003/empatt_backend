import{M as b}from"./MainLayout-vZCMMv3O.js";import{r as y,i as D,o,f as M,b as t,c as l,e as _,F as g,j as h,t as c,n as p,W as k,x as C}from"./app-D2HYKBzG.js";import{d as S}from"./dayjs.min-mSKcs6Z2.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={components:{MainLayout:b},props:{overtimes:Object},methods:{toggleStatus(a,r){$.LoadingOverlay("show"),C({id:a.id,status:r}).post(route("overtime.update-status"),{onSuccess:()=>{$.LoadingOverlay("hide")},onError:()=>{console.log("Error")}})},goToPage(a){k.visit(a,{preserveScroll:!0,preserveState:!0})},formatDate(a){return S(a).format("DD-MMM-YYYY hh:mm:ss A")},calculateTotalHours(a,r){const[s,v,f]=a.split(":").map(Number),[n,i,e]=r.split(":").map(Number),d=new Date(0,0,0,s,v,f),u=new Date(0,0,0,n,i,e);let m=u-d;return m<0&&(u.setDate(u.getDate()+1),m=u-d),(m/(1e3*60*60)).toFixed(2)}}},x={class:"container"},T={class:"row"},j={class:"Report-wrapper"},w={key:0,class:"table-container"},N=["onClick"],B=["onClick"],E={key:1,class:"pagination"},O=["disabled","onClick","innerHTML"],Y={key:2,class:"not-found-msg"};function A(a,r,s,v,f,n){const i=y("MainLayout");return o(),D(i,null,{default:M(()=>[t("div",x,[t("div",T,[t("div",j,[s.overtimes.data.length>0?(o(),l("div",w,[t("table",null,[r[0]||(r[0]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Employee Name"),t("th",null,"Reason"),t("th",null,"Total Hour"),t("th",null,"Created At"),t("th",null,"Status")])],-1)),t("tbody",null,[(o(!0),l(g,null,h(s.overtimes.data,(e,d)=>(o(),l("tr",{key:"employee_list"+d},[t("td",null,c(d+1),1),t("td",null,c(e.employee.firstname)+" "+c(e.employee.lastname),1),t("td",null,c(e.reason),1),t("td",null,c(n.calculateTotalHours(e.start_time,e.end_time)),1),t("td",null,c(n.formatDate(e.created_at)),1),t("td",null,[t("button",{onClick:u=>n.toggleStatus(e,"rejected"),class:p(["btn btn-outline-danger",{disabled:e.status!=="pending"&&e.status!=="approved"}])},"Reject",10,N),t("button",{onClick:u=>n.toggleStatus(e,"approved"),class:p(["btn btn-outline-success mx-3",{disabled:e.status!=="pending"&&e.status!=="rejected"}])},"Approved",10,B)])]))),128))])])])):_("",!0),s.overtimes.data.length>0?(o(),l("div",E,[(o(!0),l(g,null,h(s.overtimes.links,e=>(o(),l("button",{key:e.label,disabled:!e.url,onClick:d=>n.goToPage(e.url),innerHTML:e.label,class:p(["px-2 pagination-item",{"pagination-item-active":e.active}])},null,10,O))),128))])):_("",!0),s.overtimes.data.length==0?(o(),l("span",Y,"No record.")):_("",!0)])])])]),_:1})}const W=H(L,[["render",A],["__scopeId","data-v-5118312f"]]);export{W as default};
