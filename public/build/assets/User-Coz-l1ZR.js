import{M as E}from"./MainLayout-BnnnTmoP.js";import{k as L,c as U,o as r,w as x,b as s,t as a,j as m,n as f,l as u,f as n,F as _,m as h,s as v,h as b,e as B,W as g,x as y}from"./app-X9y9n1zk.js";import{_ as k,a as N}from"./no-image-Cky2czAe.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={components:{MainLayout:E},props:{users:Array,companies:Array,filters:Object},mounted(){let l=this;$("#staticBackdrop").on("hide.bs.modal",function(){l.clearForms(),l.clearErrors(),document.getElementById("logo-preview").src=k,document.querySelector("input[type=file]").value=""}),$("#deleteModal").on("hide.bs.modal",function(){l.form_data.id=null})},data(){return{form_data:y({id:null,firstname:"",lastname:"",email:"",phone_number:"",gender:"",company_id:"",role:"",photo:null,old_photo:null,password:"",confirm_password:""}),errors:{firstname:"",lastname:"",email:"",phone_number:"",gender:"",company_id:"",role:"",password:"",confirm_password:""},search:this.filters.search||"",debounceTimer:null}},methods:{searchItems(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{g.get(route("user"),{search:this.search},{preserveState:!0,replace:!0})},300)},save(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"});let l=this;this.clearErrors(),this.form_data.post(route("createUser"),{onSuccess:function(o){$("#staticBackdrop").modal("hide"),l.clearForms()},onError:o=>{Object.keys(o).forEach(c=>{this.errors[c]=o[c]}),console.log(this.errors)}}),$.LoadingOverlay("hide")},saveEdit(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"});let l=this;this.clearErrors(),this.form_data.post(route("saveUser"),{onSuccess:function(o){$("#staticBackdrop").modal("hide"),l.clearForms()},onError:o=>{Object.keys(o).forEach(c=>{this.errors[c]=o[c]}),console.log(this.errors)}}),$.LoadingOverlay("hide")},onEdit(l){this.form_data.id=l.id,this.form_data.firstname=l.firstname,this.form_data.lastname=l.lastname,this.form_data.email=l.email,this.form_data.phone_number=l.phone_number,this.form_data.gender=l.gender,this.form_data.role=l.role,this.form_data.company_id=l.company_id,this.form_data.old_photo=l.photo,$("#staticBackdrop").modal("show")},onDelete(l){this.form_data.id=l.id,console.log(this.form_data.id),$("#deleteModal").modal("show")},onCfDelete(){$.LoadingOverlay("show",{background:"rgb(0 0 0 / 35%)",imageColor:"#ffffff"}),y({id:this.form_data.id}).post(route("deleteUser"),{onSuccess:()=>$("#deleteModal").modal("hide"),onError:o=>{console.log(o)}}),$.LoadingOverlay("hide")},onChangeFile(l){let o=l.target.files[0];o&&(this.form_data.photo=o)},clearErrors(){this.errors.firstname="",this.errors.lastname="",this.errors.email="",this.errors.phone_number="",this.errors.gender="",this.errors.company_id="",this.errors.role="",this.errors.password="",this.errors.confirm_password=""},clearForms(){this.form_data.id=null,this.form_data.firstname="",this.form_data.lastname="",this.form_data.email="",this.form_data.phone_number="",this.form_data.photo=null,this.form_data.old_photo=null,this.form_data.company_id="",this.form_data.password="",this.form_data.confirm_password="",this.form_data.gender="",this.form_data.role=""},goToPage(l){g.visit(l,{preserveScroll:!0,preserveState:!0})}}},V={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},S={class:"modal-dialog modal-dialog-centered modal-xl"},O={class:"modal-content"},T={class:"modal-header"},D={class:"modal-title fs-5",id:"staticBackdropLabel"},P={class:"modal-body"},j={class:"d-flex gap-5"},I={style:{width:"65%"}},A={class:"d-flex gap-5"},R={class:"w-50"},q={class:"mb-3"},G={class:"invalid-feedback"},H={class:"mb-3"},W={class:"invalid-feedback"},z={class:"mb-3"},J=["value"],K={class:"invalid-feedback"},Q={class:"mb-3"},X={class:"invalid-feedback"},Y={class:"w-50"},Z={class:"mb-3"},ss={class:"invalid-feedback"},os={class:"mb-3"},es={class:"invalid-feedback"},ts={class:"mb-3"},ls={class:"invalid-feedback"},rs={class:"mb-3"},as={class:"invalid-feedback"},ns={class:"mb-3"},is={class:"invalid-feedback"},ds={style:{width:"35%"},class:"d-flex justify-content-center align-items-center"},ms={class:"mb-3"},fs={id:"preview-wrapper"},us=["src"],cs={key:1,src:k,id:"logo-preview",alt:""},ps={class:"modal-footer"},bs={class:"modal fade",id:"deleteModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},_s={class:"modal-dialog modal-dialog-centered"},hs={class:"modal-content"},vs={class:"modal-footer"},gs={class:"Report-wrapper"},ys={class:"d-flex justify-content-between align-items-center"},ks={class:"search-container"},ws={class:"txt-search"},Cs=["disabled"],Es={key:0,class:"table-container"},Ls={class:"company-logo"},Us={key:0,src:N,alt:""},xs=["src"],Bs=["onClick"],Ns=["onClick"],Ms={key:1,class:"pagination"},Fs=["disabled","onClick","innerHTML"],Vs={key:2,class:"not-found-msg"},Ss={key:3,class:"not-found-msg"};function Os(l,o,d,c,t,i){const w=L("MainLayout");return r(),U(w,null,{default:x(()=>[s("div",V,[s("div",S,[s("div",O,[s("div",T,[s("h1",D,a(t.form_data.id?"Edit User":"New User"),1),o[15]||(o[15]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),s("div",P,[s("form",j,[s("div",I,[s("div",A,[s("div",R,[s("div",q,[o[16]||(o[16]=s("label",{for:"fname",class:"form-label"},"First Name",-1)),m(s("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>t.form_data.firstname=e),class:f(["form-control",{"is-invalid":t.errors.firstname!==""}]),id:"fname",placeholder:"Enter First Name*"},null,2),[[u,t.form_data.firstname]]),s("div",G,a(t.errors.firstname),1)]),s("div",H,[o[17]||(o[17]=s("label",{for:"email",class:"form-label"},"Email address",-1)),m(s("input",{type:"email","onUpdate:modelValue":o[1]||(o[1]=e=>t.form_data.email=e),class:f(["form-control",{"is-invalid":t.errors.email!==""}]),id:"email",placeholder:"Enter Email Address*"},null,2),[[u,t.form_data.email]]),s("div",W,a(t.errors.email),1)]),s("div",z,[o[19]||(o[19]=s("label",{for:"company",class:"form-label"},"Company",-1)),m(s("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>t.form_data.company_id=e),id:"company",class:f(["form-control",{"is-invalid":t.errors.company_id!==""}])},[o[18]||(o[18]=s("option",{value:"",disabled:""},"Choose Company",-1)),(r(!0),n(_,null,h(d.companies,(e,p)=>(r(),n("option",{value:e.id,key:"company"+p},a(e.name),9,J))),128))],2),[[v,t.form_data.company_id]]),s("div",K,a(t.errors.company_id),1)]),s("div",Q,[o[20]||(o[20]=s("label",{for:"password",class:"form-label"},"Password",-1)),m(s("input",{type:"password","onUpdate:modelValue":o[3]||(o[3]=e=>t.form_data.password=e),class:f(["form-control",{"is-invalid":t.errors.password!==""}]),id:"password",placeholder:"Enter Password*"},null,2),[[u,t.form_data.password]]),s("div",X,a(t.errors.password),1)])]),s("div",Y,[s("div",Z,[o[21]||(o[21]=s("label",{for:"lname",class:"form-label"},"Last Name",-1)),m(s("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=e=>t.form_data.lastname=e),class:f(["form-control",{"is-invalid":t.errors.lastname!==""}]),id:"lname",placeholder:"Enter Last Name*"},null,2),[[u,t.form_data.lastname]]),s("div",ss,a(t.errors.lastname),1)]),s("div",os,[o[22]||(o[22]=s("label",{for:"phone_number",class:"form-label"},"Phone Number",-1)),m(s("input",{type:"number","onUpdate:modelValue":o[5]||(o[5]=e=>t.form_data.phone_number=e),class:f(["form-control",{"is-invalid":t.errors.phone_number!==""}]),id:"phone_number",placeholder:"Enter Phone Number*"},null,2),[[u,t.form_data.phone_number]]),s("div",es,a(t.errors.phone_number),1)]),s("div",ts,[o[24]||(o[24]=s("label",{for:"gender",class:"form-label"},"Gender",-1)),m(s("select",{"onUpdate:modelValue":o[6]||(o[6]=e=>t.form_data.gender=e),id:"gender",class:f(["form-control",{"is-invalid":t.errors.gender!==""}])},o[23]||(o[23]=[s("option",{value:"",disabled:""},"Choose Gender",-1),s("option",{value:"Male"},"Male",-1),s("option",{value:"Female"},"Female",-1)]),2),[[v,t.form_data.gender]]),s("div",ls,a(t.errors.gender),1)]),s("div",rs,[o[25]||(o[25]=s("label",{for:"cf_password",class:"form-label"},"Confirm Password",-1)),m(s("input",{type:"password","onUpdate:modelValue":o[7]||(o[7]=e=>t.form_data.confirm_password=e),class:f(["form-control",{"is-invalid":t.errors.confirm_password!==""}]),id:"cf_password",placeholder:"Enter Confirm Password*"},null,2),[[u,t.form_data.confirm_password]]),s("div",as,a(t.errors.confirm_password),1)])])]),s("div",null,[s("div",ns,[o[27]||(o[27]=s("label",{for:"role",class:"form-label"},"Role",-1)),m(s("select",{"onUpdate:modelValue":o[8]||(o[8]=e=>t.form_data.role=e),id:"role",class:f(["form-control",{"is-invalid":t.errors.role!==""}])},o[26]||(o[26]=[s("option",{value:"",disabled:""},"Choose Role",-1),s("option",{value:"owner"},"Owner",-1),s("option",{value:"admin"},"Admin",-1)]),2),[[v,t.form_data.role]]),s("div",is,a(t.errors.role),1)])])]),s("div",ds,[s("div",ms,[s("div",fs,[t.form_data.old_photo?(r(),n("img",{key:0,src:"/images/users/"+t.form_data.old_photo,id:"logo-preview",alt:""},null,8,us)):(r(),n("img",cs))]),o[28]||(o[28]=s("label",{for:"logo",class:"form-label"},"Logo",-1)),s("input",{type:"file",class:"form-control",id:"logo",onChange:o[9]||(o[9]=(...e)=>i.onChangeFile&&i.onChangeFile(...e)),onchange:"document.getElementById('logo-preview').src = window.URL.createObjectURL(this.files[0])"},null,32)])])])]),s("div",ps,[o[29]||(o[29]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),t.form_data.id?(r(),n("button",{key:1,onClick:o[11]||(o[11]=(...e)=>i.saveEdit&&i.saveEdit(...e)),type:"button",class:"btn btn-primary"},"Save")):(r(),n("button",{key:0,onClick:o[10]||(o[10]=(...e)=>i.save&&i.save(...e)),type:"button",class:"btn btn-primary"},"Save"))])])])]),s("div",bs,[s("div",_s,[s("div",hs,[o[31]||(o[31]=s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Delete User?"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),o[32]||(o[32]=s("div",{class:"modal-body"},[s("h4",null,"Are you sure delete this users?")],-1)),s("div",vs,[o[30]||(o[30]=s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),s("button",{onClick:o[12]||(o[12]=(...e)=>i.onCfDelete&&i.onCfDelete(...e)),type:"button",class:"btn btn-danger"},"Delete")])])])]),s("div",gs,[s("div",ys,[s("div",ks,[s("div",ws,[o[33]||(o[33]=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),m(s("input",{type:"text","onUpdate:modelValue":o[13]||(o[13]=e=>t.search=e),onInput:o[14]||(o[14]=(...e)=>i.searchItems&&i.searchItems(...e)),placeholder:"Search name, email or phone number",disabled:!this.filters.search&&d.users.data.length==0,autocomplete:"off"},null,40,Cs),[[u,t.search]])])]),o[34]||(o[34]=s("button",{class:"primary-button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},[s("i",{class:"fa-solid fa-plus"}),B("  New User")],-1))]),d.users.data.length>0?(r(),n("div",Es,[s("table",null,[o[37]||(o[37]=s("thead",null,[s("tr",null,[s("th",null,"ID"),s("th",null,"Photo"),s("th",null,"Name"),s("th",null,"Email"),s("th",null,"Phone Number"),s("th",null,"Company"),s("th",null,"Role"),s("th",null,"Action")])],-1)),s("tbody",null,[(r(!0),n(_,null,h(d.users.data,(e,p)=>(r(),n("tr",{key:"company_list"+p},[s("td",null,a(p+1),1),s("td",null,[s("div",Ls,[e.photo?(r(),n("img",{key:1,src:"/images/users/"+e.photo,onerror:"this.src='error-image.jpg'",alt:""},null,8,xs)):(r(),n("img",Us))])]),s("td",null,a(e.firstname+" "+e.lastname),1),s("td",null,a(e.email),1),s("td",null,a(e.phone_number),1),s("td",null,a(e.company.name),1),s("td",null,a(e.role),1),s("td",null,[s("button",{onClick:C=>i.onDelete(e),class:"btn btn-outline-danger"},o[35]||(o[35]=[s("i",{class:"fa-solid fa-trash"},null,-1)]),8,Bs),s("button",{onClick:C=>i.onEdit(e),class:"btn btn-outline-primary mx-2"},o[36]||(o[36]=[s("i",{class:"fa-solid fa-pen-to-square"},null,-1)]),8,Ns)])]))),128))])])])):b("",!0),d.users.data.length>0?(r(),n("div",Ms,[(r(!0),n(_,null,h(d.users.links,e=>(r(),n("button",{key:e.label,disabled:!e.url,onClick:p=>i.goToPage(e.url),innerHTML:e.label,class:f(["px-2 pagination-item",{"pagination-item-active":e.active}])},null,10,Fs))),128))])):b("",!0),this.filters.search&&d.users.data.length==0?(r(),n("span",Vs,"No record founded.")):b("",!0),!this.filters.search&&d.users.data.length==0?(r(),n("span",Ss,"No record.")):b("",!0)])]),_:1})}const Is=M(F,[["render",Os]]);export{Is as default};
