import{S as v,g as y,r as p,c as n,o as l,a as c,b as e,e as d,t as a,w as m,v as u,h as b,d as f,n as w,F as k,W as C,x as R}from"./app-BbAuhPIs.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={components:{Head:y,Link:v},data(){return{remainingTime:60,step:1,success:{message:"",show:!1},error:{message:"",show:!1},form:R({email:"",code:"",password:"",confirm_password:""})}},methods:{clearErrors(){this.errors={email:"",code:"",password:"",confirm_password:""}},sendResetCode(){$.LoadingOverlay("show"),this.form.post(route("sendResetCode"),{onSuccess:()=>{this.step=2,this.remainingTime=60,this.startTimer(),$.LoadingOverlay("hide"),this.success.message="Reset code sent to your email.",this.success.show=!0,setTimeout(()=>{this.success.show=!1},3e3)},onError:r=>{r.email&&(this.error.message=r.email,this.error.show=!0,setTimeout(()=>{this.error.show=!1},3e3)),$.LoadingOverlay("hide")}})},verifyResetCode(){$.LoadingOverlay("show"),this.form.post(route("verifyResetCode"),{onSuccess:()=>{this.step=3,$.LoadingOverlay("hide"),this.success.message="Reset code verified.",this.success.show=!0,setTimeout(()=>{this.success.show=!1},3e3)},onError:r=>{r.message&&(this.error.message=r.message,this.error.show=!0,setTimeout(()=>{this.error.show=!1,this.error.message=""},3e3)),$.LoadingOverlay("hide")}})},resetPassword(){$.LoadingOverlay("show"),this.form.post(route("processResetPassword"),{onSuccess:()=>{this.success.message="Password reset successfully. You will be redirected to login page in 5 seconds.",this.success.show=!0,$.LoadingOverlay("hide");let r=5,s=setInterval(()=>{r--,this.success.message="Password reset successfully. You will be redirected to login page in "+r+" seconds.",r<=0&&(clearInterval(s),this.success.show=!1,C.visit(route("login")))},1e3)},onError:r=>{console.log(r),r.password&&r.confirm_password?this.form.password==""&&this.form.confirm_password==""?(this.error.message="Password and confirm password are required.",this.error.show=!0):this.form.password!=this.form.confirm_password&&(this.error.message="Password and confirm password do not match.",this.error.show=!0):r.password?(this.error.message=r.password,this.error.show=!0):r.confirm_password&&(this.error.message=r.confirm_password,this.error.show=!0),setTimeout(()=>{this.error.show=!1,this.error.message=""},3e3),$.LoadingOverlay("hide")}})},startTimer(){const r=setInterval(()=>{this.remainingTime--,this.remainingTime<=0&&clearInterval(r)},1e3)}}},E={class:"form-container"},P={class:"form-panel"},L={key:0,class:"form-description"},x={key:1,class:"alert alert-success d-flex justify-content-between"},O={class:"d-flex align-items-center gap-2"},S={class:"mb-0"},V={key:2,class:"alert alert-danger d-flex justify-content-between"},N={class:"d-flex align-items-center gap-2"},I={class:"mb-0"},j={key:3},B={class:"form-group"},F={class:"back-link-container"},U={key:4},D={class:"form-group"},H={class:"form-group d-flex justify-content-between"},K={class:"text-primary"},W={key:5},Y={class:"form-group"},q={class:"form-group"},z={key:0,class:"invalid-feedback"};function M(r,s,A,G,t,i){const g=p("Head"),h=p("Link");return l(),n(k,null,[c(g,{title:"Reset Password"}),e("div",E,[e("div",P,[e("div",null,[s[21]||(s[21]=e("div",{class:"form-header"},[e("h1",null,"Forgot Password?")],-1)),t.step==1?(l(),n("p",L," No problem. Enter the email address you used to register and we'll send you a link to reset your password. ")):d("",!0),t.success.show?(l(),n("div",x,[e("div",O,[s[10]||(s[10]=e("i",{class:"fa-solid fa-circle-check"},null,-1)),e("p",S,a(t.success.message),1)]),s[11]||(s[11]=e("button",{class:"btn-close","data-bs-dismiss":"alert"},null,-1))])):d("",!0),t.error.show?(l(),n("div",V,[e("div",N,[s[12]||(s[12]=e("i",{class:"fa-solid fa-circle-xmark"},null,-1)),e("p",I,a(t.error.message),1)]),s[13]||(s[13]=e("button",{class:"btn-close","data-bs-dismiss":"alert"},null,-1))])):d("",!0),t.step==1?(l(),n("form",j,[e("div",B,[s[14]||(s[14]=e("label",{for:"email"},"Email",-1)),m(e("input",{onKeyup:s[0]||(s[0]=(...o)=>i.clearErrors&&i.clearErrors(...o)),"onUpdate:modelValue":s[1]||(s[1]=o=>t.form.email=o),type:"email",id:"email",placeholder:"Enter your email"},null,544),[[u,t.form.email]])]),e("button",{onClick:s[2]||(s[2]=(...o)=>i.sendResetCode&&i.sendResetCode(...o)),type:"button",class:"btn"}," Send Reset Code "),e("div",F,[c(h,{href:r.route("login"),class:"back-link"},{default:b(()=>s[15]||(s[15]=[f("Back to Login")])),_:1,__:[15]},8,["href"])])])):d("",!0),t.step==2?(l(),n("form",U,[e("div",D,[s[16]||(s[16]=e("label",{for:"code"},"Reset Code",-1)),m(e("input",{onKeyup:s[3]||(s[3]=(...o)=>i.clearErrors&&i.clearErrors(...o)),"onUpdate:modelValue":s[4]||(s[4]=o=>t.form.code=o),type:"text",id:"code",placeholder:"Enter the code"},null,544),[[u,t.form.code]])]),e("div",H,[e("span",null,[s[17]||(s[17]=f("Remaining time: ")),e("span",K,"0:"+a(t.remainingTime.toString().padStart(2,"0"))+"s",1)]),e("span",null,[s[18]||(s[18]=f("Didn't receive the code? ")),e("a",{href:"javascript:void(0)",onClick:s[5]||(s[5]=(...o)=>i.sendResetCode&&i.sendResetCode(...o)),class:w({disabled:t.remainingTime>0})},"Resend Code",2)])]),e("button",{onClick:s[6]||(s[6]=(...o)=>i.verifyResetCode&&i.verifyResetCode(...o)),type:"button",class:"btn"}," Confirm ")])):d("",!0),t.step==3?(l(),n("form",W,[e("div",Y,[s[19]||(s[19]=e("label",{for:"password"},"New Password",-1)),m(e("input",{"onUpdate:modelValue":s[7]||(s[7]=o=>t.form.password=o),type:"password",id:"password",placeholder:"Enter your new password"},null,512),[[u,t.form.password]])]),e("div",q,[s[20]||(s[20]=e("label",{for:"confirm-password"},"Confirm Password",-1)),m(e("input",{"onUpdate:modelValue":s[8]||(s[8]=o=>t.form.confirm_password=o),type:"password",id:"confirm-password",placeholder:"Confirm your new password",class:w({"is-invalid":r.errors.confirm_password})},null,2),[[u,t.form.confirm_password]]),r.errors.confirm_password?(l(),n("div",z,a(r.errors.confirm_password),1)):d("",!0)]),e("button",{onClick:s[9]||(s[9]=(...o)=>i.resetPassword&&i.resetPassword(...o)),type:"button",class:"btn"}," Reset Password ")])):d("",!0)])]),s[22]||(s[22]=e("div",{class:"illustration-panel"},[e("img",{src:"/reset-password.png",alt:"Forgot password illustration"})],-1))])],64)}const X=_(T,[["render",M],["__scopeId","data-v-89c69b14"]]);export{X as default};
